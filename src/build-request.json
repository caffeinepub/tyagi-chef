{
  "kind": "build_request",
  "title": "Fix New Candidate runtime error: Cannot read properties of undefined (reading 'toUpperCase')",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-19",
      "text": "Fix the New Candidate flow runtime crash \"Cannot read properties of undefined (reading 'toUpperCase')\" by making candidate status label/badge rendering resilient to missing or unexpected status values (e.g., undefined) in all candidate UI surfaces that call `toUpperCase()` (at minimum: Candidates list and Candidate detail pages).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "new candidate me error aa rha hai- Cannot read properties of undefined (reading 'toUpperCase')"
        ]
      },
      "acceptanceCriteria": [
        "Creating a new candidate no longer crashes the UI.",
        "CandidatesListPage and CandidateDetailPage do not call `toUpperCase()` on an undefined value (or otherwise throw) even if a candidate record has a missing/unknown status.",
        "When status is missing/unknown, the UI shows a safe fallback label (English text) instead of crashing."
      ]
    },
    {
      "id": "REQ-20",
      "text": "Verify end-to-end that the backend always returns a populated `status` for `Candidate` records created via `createCandidate`, and if any data inconsistencies can still surface in the frontend (e.g., legacy records or decoding edge cases), ensure the frontend gracefully handles them without runtime errors.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "new candidate me error aa rha hai- Cannot read properties of undefined (reading 'toUpperCase')"
        ]
      },
      "acceptanceCriteria": [
        "New candidates created via the UI have a non-empty status when fetched from the backend.",
        "If any existing/legacy candidate data is missing status, the UI still renders candidate list/detail screens without errors."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui (read-only).",
    "Do not edit any files listed in frontend.immutablePaths (compose existing hooks/components instead).",
    "Backend changes must respect the single-actor architecture (all Motoko logic in backend/main.mo). Create backend/migration.mo only if an upgrade is required to handle existing persisted state."
  ],
  "nonGoals": [
    "Do not add new candidate fields or change candidate business logic beyond what is required to prevent the runtime error.",
    "Do not change the app visual theme or navigation as part of this fix."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}